# Markdown Polisher

**https://kichouji.github.io/markdown-polisher/**

Google ドキュメントから Markdown に変換したテキストを、ブラウザ上で整形するクライアントサイドツールです。

## 概要

Google ドキュメントを Markdown 形式に変換すると、LaTeX 数式が画像タグに置き換えられたり、注釈番号や余分なスペースが残ったりと、手作業による修正が必要になります。本ツールはそれらの整形処理をブラウザ上で完結させます。

- サーバー不要（静的 HTML + JavaScript のみ）
- GitHub Pages で公開可能

## 画面構成

| エリア | 説明 |
|---|---|
| 左ペイン | LaTeX 数式を含む元のテキストを入力 |
| 右ペイン | Google ドキュメントから変換した Markdown テキストを入力 |
| コントロールバー | 各機能のオン／オフ切替と変換ボタン |
| 出力エリア | 変換結果の表示（クリップボードへのコピー機能付き） |

## 機能一覧

変換ボタン押下時に、有効な機能を以下の順番で実行します。

### 機能 1：Imageタグ → LaTeX 変換

Google ドキュメントの Markdown 変換で生成される `![][imageX]` タグを、左ペインに入力した LaTeX 式（`$...$` / `$$...$$`）で上から順番に置換します。あわせて対応する Base64 画像定義行も削除します。

> LaTeX 式の数と `![][imageX]` タグの数が一致しない場合はエラーを表示します。

**変換例**

```
# 変換前
![][image1] はスケーリング因子であり...

[image1]: <data:image/png;base64,iVBO...>

# 変換後
$d_k$ はスケーリング因子であり...
```

### 機能 2：Base64 画像データ削除

`[imageX]: <data:image/...>` 形式の行を削除します。機能 1 と組み合わせて使用することを想定していますが、単独でも動作します。

### 機能 3：注釈番号の削除

本文中に散在する「1〜2桁の数字＋全角句点」形式の注釈番号を削除します。

**変換例**

```
# 変換前
これはテストです 7。次の文が続きます。

# 変換後
これはテストです。次の文が続きます。
```

`注釈`・`参考文献`・`脚注` のいずれかの見出し以降は削除対象外とします。

### 機能 4：行末スペース削除

各行末の半角スペース・タブを削除します。全角スペースは対象外です。

### 機能 5：リスト整形（空行挿入）

連続するリスト項目（行頭 `* `）の間に空行を挿入します。

**変換例**

```
# 変換前
* item1
* item2
* item3

# 変換後
* item1

* item2

* item3
```

### 機能 6：リスト末尾への `<br><br>` 挿入

連続するリストブロック内の各項目末尾に `<br><br>` を追加します。ブロック内の最後の項目には追加しません。

**変換例**

```
# 変換前
* item1
* item2
* item3

# 変換後
* item1<br><br>
* item2<br><br>
* item3
```

## 使い方

1. `index.html` をブラウザで開く
2. 左ペインに LaTeX 数式を含むテキストを貼り付ける
3. 右ペインに Google ドキュメントから変換した Markdown を貼り付ける
4. 実行したい機能にチェックを入れる（初期状態はすべて ON）
5. 「変換」ボタンをクリック
6. 出力エリアに結果が表示されるので、「出力をコピー」ボタンでコピーする

## ファイル構成

```
markdown-polisher/
├── index.html        # アプリ本体（HTML + CSS + JavaScript）
├── requirements.txt  # 要件定義書
├── sample_latex.txt  # 左ペイン用サンプルテキスト
├── sample_image.md   # 右ペイン用サンプルテキスト
└── README.md
```

## 動作環境

モダンブラウザ（Chrome / Firefox / Edge / Safari）で動作します。サーバーは不要です。
